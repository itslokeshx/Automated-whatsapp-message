<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsApp Automation | Message Scheduler</title>
  <meta name="description" content="Automate WhatsApp messages with scheduling and templates">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/design-system.css">
  <link rel="stylesheet" href="/css/components.css">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header class="header fade-in">
      <div class="header-title">
        <span class="header-icon">üí¨</span>
        <h1>WhatsApp Automation</h1>
      </div>
      <p class="header-subtitle">Send and schedule WhatsApp messages using the Business API</p>
    </header>

    <!-- Info Box -->
    <div class="info-box fade-in">
      <p>
        <strong>üìå Note:</strong> This tool uses WhatsApp Business API.
        Template messages work immediately. Custom text messages require an active 24-hour conversation window with the
        recipient.
      </p>
    </div>

    <!-- Main Grid -->
    <div class="grid grid-2">
      <!-- Send Message Card -->
      <div class="card fade-in">
        <div class="card-header">
          <h3 class="card-title">Send Message</h3>
          <span class="status-badge success">
            <span class="status-dot"></span>
            Ready
          </span>
        </div>

        <form id="sendMessageForm">
          <div class="input-group">
            <label class="input-label" for="sendRecipient">
              Recipient Phone Number
            </label>
            <input type="text" id="sendRecipient" class="input" placeholder="919444539625" required>
            <small class="text-muted">Format: Country code + number (e.g., 919444539625)</small>
          </div>

          <div class="input-group">
            <label class="input-label" for="sendMessage">
              Message (Optional)
            </label>
            <textarea id="sendMessage" class="input textarea"
              placeholder="Leave empty to use approved template message..."></textarea>
            <small class="text-muted">Custom messages only work within 24-hour conversation window</small>
          </div>

          <button type="submit" class="btn btn-success" id="sendBtn">
            <span>Send Now</span>
            <span>‚Üí</span>
          </button>
        </form>
      </div>

      <!-- Schedule Message Card -->
      <div class="card fade-in">
        <div class="card-header">
          <h3 class="card-title">Schedule Message</h3>
          <span class="card-badge">Automation</span>
        </div>

        <form id="scheduleMessageForm">
          <div class="input-group">
            <label class="input-label" for="scheduleRecipient">
              Recipient Phone Number
            </label>
            <input type="text" id="scheduleRecipient" class="input" placeholder="919444539625" required>
          </div>

          <div class="input-group">
            <label class="input-label" for="scheduleMessage">
              Message (Optional)
            </label>
            <textarea id="scheduleMessage" class="input textarea"
              placeholder="Leave empty to use approved template message..."></textarea>
          </div>

          <div class="input-group">
            <label class="input-label" for="scheduleType">
              Schedule Type
            </label>
            <select id="scheduleType" class="select">
              <option value="one-time">One-time</option>
              <option value="recurring">Recurring (Cron)</option>
            </select>
          </div>

          <!-- One-time scheduling -->
          <div id="oneTimeSchedule" class="input-group">
            <label class="input-label" for="scheduleDateTime">
              Date & Time
            </label>
            <input type="datetime-local" id="scheduleDateTime" class="input">
          </div>

          <!-- Recurring scheduling -->
          <div id="recurringSchedule" class="input-group" style="display: none;">
            <label class="input-label" for="cronExpression">
              Cron Expression
            </label>
            <input type="text" id="cronExpression" class="input" placeholder="0 17 * * *">
            <small class="text-muted">Example: "0 17 * * *" = Daily at 5:00 PM</small>
          </div>

          <button type="submit" class="btn btn-primary" id="scheduleBtn">
            <span>Schedule Message</span>
            <span>‚è∞</span>
          </button>
        </form>
      </div>
    </div>

    <!-- Scheduled Messages List -->
    <div class="card fade-in" style="margin-top: var(--space-lg);">
      <div class="card-header">
        <h3 class="card-title">Scheduled Messages</h3>
        <button class="btn btn-secondary btn-sm" id="refreshBtn">
          <span>Refresh</span>
          <span>‚Üª</span>
        </button>
      </div>

      <div id="scheduledListContainer">
        <div class="empty-state">
          <div class="empty-state-icon">üì≠</div>
          <p>No scheduled messages</p>
        </div>
      </div>
    </div>

    <!-- Server Status -->
    <div class="card fade-in" style="margin-top: var(--space-lg);">
      <div class="card-header">
        <h3 class="card-title">Server Status</h3>
        <button class="btn btn-secondary btn-sm" id="healthCheckBtn">
          <span>Check Health</span>
        </button>
      </div>

      <div id="healthStatus">
        <p class="text-muted">Click "Check Health" to view server status</p>
      </div>
    </div>

    <!-- Footer -->
    <footer
      style="text-align: center; margin-top: var(--space-2xl); padding-top: var(--space-xl); border-top: 1px solid var(--border-color);">
      <p class="text-muted" style="font-size: 0.875rem;">
        Built with WhatsApp Business API ‚Ä¢
        <a href="https://github.com/itslokeshx/Automated-whatsapp-message" target="_blank"
          style="color: var(--accent-primary); text-decoration: none;">View on GitHub</a>
      </p>
    </footer>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <!-- Scripts -->
  <script src="/js/app.js"></script>
  <script src="/js/scheduler.js"></script>
</body>

</html>